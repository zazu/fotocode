<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>appgeordnet</title>
    <!-- Path to Framework7 Library CSS-->
    <link rel="stylesheet" href="css/framework7.material.min.css">
    <link rel="stylesheet" href="css/framework7.material.colors.min.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="css/my-app.css">
  </head>
  <body class="theme-teal layout-white" id="app">
    <!-- Status bar overlay for fullscreen mode-->
    <div class="statusbar-overlay"></div>
    <!-- Panels overlay-->
    <div class="panel-overlay"></div>
    <!-- Left panel with reveal effect-->
    <div class="panel panel-right panel-cover">
      <div class="content-block">
          
        <div class="list-block">
          <ul>
            <li><a href="#quickscan" class="item-link close-panel">
              <div class="item-content">
                <div class="item-inner"> 
                  <div class="item-title">
                      <i class="icon icon-camera"></i>
                      Quickscan</div>
                </div>
              </div></a></li>
            <li v-if="sets.length && loggedin" ><a @click="senden" href="#" class="item-link close-panel">
              <div class="item-content">

                <div class="item-inner"> 
                  <div class="item-title">
                      <i class="icon icon-cloud-upload"></i>
                      Senden</div>
                </div>
              </div></a></li>


            <li v-if="loggedin"><a @click="logout" href="#" class="close-panel">
              <div class="item-content">
                <div class="item-inner">
                  <div class="item-title">
                      <i class="icon icon-cross"></i>
                      Logout</div>
                </div>
              </div></a></li>
            <li v-else ><a href="#login" class="item-link close-panel">
              <div class="item-content">
                <div class="item-inner">
                  <div class="item-title">
                      <i class="icon icon-user"></i>
                      Login</div>
                </div>
              </div></a></li>
          </ul>
            <div class="infoby">
            Version {{appversion}}<br>
            Software by cesart - cesar@cesart.de
            </div>
        </div>
      </div>
    </div>
    <!-- Views-->
    <div class="views">
      <!-- Your main view, should have "view-main" class-->
      <div class="view view-main">
          
        <!-- Pages -->
        <div class="pages ">
          <!-- Index page -->
          <div data-page="index" class="page toolbar-fixed navbar-fixed">
              
            <!-- Top Navbar-->
            <div class="navbar">
              <div class="navbar-inner" v-cloak>
                <div class="center">appgeordnet</div>
                <div class="right">
<!--                    <a href="#quickscan" class="link icon-only"><i class="icon icon-camera-light"></i></a> -->
                    <a href="#" class="link icon-only open-panel"> <i class="icon icon-bars"></i></a>
                </div>
              </div>
            </div>

            <div class="toolbar toolbar-bottom">
              <div class="toolbar-inner" v-cloak>
                <span>&nbsp;&nbsp;{{user.name}}</span>
                <span></span>
                <a href="#quickscan" class="link icon-only"><i class="icon icon-camera-light"></i></a>
              </div>
            </div>

            <!-- Scrollable page content-->
            <div class="page-content">
            <div class="content-block-title" v-cloak>
                <div><span class="infocollabel">Letzer Versand:</span>{{lastsent}}</div>
                <div><span class="infocollabel">Lokale Daten:</span>{{numsets}}
                    <span v-if="numsets==1"> Vorgang</span>
                    <span v-else> Vorg√§nge</span> / {{numfotos}}
                    <span v-if="numfotos==1"> Foto</span>
                    <span v-else> Fotos</span>
                </div>
            </div>

            <div class="list-block media-list" v-cloak>
              <ul>
                  <li class="swipeout" v-for="ds in sets">
                    <div class="swipeout-content">
                      <a @click.stop.prevent="showFotos($index)" class="item-link item-content">
                        <div class="item-media">
                            <img v-if="ds.fotos.length" :src="ds.fotos[0].uri" width="80">
                        </div>
                        <div class="item-inner">
                          <div class="item-title-row">
                            <div class="item-title">{{ds.code}}</div>
                            <div class="item-after">
                                <span class="badge bg-green">{{ds.fotos.length}}</span>
                            </div>
                          </div>
                          <div class="item-subtitle">{{ds.name}}</div>
                        </div>
                      </a>
                    </div>
                    <div class="swipeout-actions-right">
                        <a @click.stop.prevent="removeset($index)" class="swipeout-close bg-red" >
                            <i class="icon icon-bin-white"></i>
                         </a>
                         <a @click.stop.prevent="showForm($index)" class="swipeout-close bg-lightblue" >
                             <i class="icon icon-file-text2-white"></i>
                         </a>
                         <a @click.prevent="setbarcode($index)" class="swipeout-close bg-lightgreen" >
                             <i class="icon icon-price-tag-white"></i>
                         </a>
                         <a @click.prevent="addfotos($index)" class="swipeout-close bg-bluegray" >
                             <i class="icon icon-camera-light"></i>
                         </a>
                   </div>
                </li>
              </ul>
            </div>
            </div>
          </div>

          <!-- Quickscan page -->
          <div class="page cached navbar-fixed" data-page="quickscan" >
            <!-- Top Navbar-->
            <div class="navbar">
              <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="back link"> <i class="icon icon-back"></i><span></span></a>
                </div>
                <div class="center">Quickscan</div>
              </div>
            </div>
            <!-- Scrollable page content-->
            <div class="page-content">
              <div class="list-block">
                <ul>

                <li v-if="hasbereiche">
                  <a href="#" class="item-link smart-select" data-back-on-select="true">
                    <select v-model="bereich">
                      <option v-for="option in bereiche.bereich | notEmpty" :value="$index">
                        {{ option }}
                      </option>
                    </select>
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-spinner4"></i></div>
                      <div class="item-inner" style="display:flex;">
                        <!-- Select label -->
                        <div class="item-title">Bereich</div>
                        <!-- Selected value, not required -->
                        <div class="item-after"></div>
                      </div>
                    </div>
                  </a>
                </li>

                <li v-show="!usecamera" transition="expand">
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-price-tag"></i></div>
                        <div class="item-inner">
                            <div class="item-input">
                                <input type="text" v-model="set.code" placeholder="Vorgangsname / Barcode"/>
                            </div>
                        </div>
                    </div>
                </li>

                  <li v-show="validbarcode">
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-info"></i></div>
                      <div class="item-inner">
                        <div class="item-input">
                          <input type="text" v-model="set.name" placeholder="Vorgangsinfo"/>
                        </div>
                      </div>
                    </div>
                  </li>

                <li v-show="!usecamera" transition="expand">
                  <a href="#" class="item-link smart-select" data-back-on-select="true">
                    <select v-model="codeformat">
                      <option value="" ></option>
                      <option v-for="format in codeformats" :value="format">
                        {{ format }}
                      </option>
                    </select>
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-list2"></i></div>
                      <div class="item-inner" style="display:flex;">
                        <!-- Select label -->
                        <div class="item-title">Barcodeformat</div>
                        <!-- Selected value, not required -->
                        <div class="item-after"></div>
                      </div>
                    </div>
                  </a>
                </li>

                  <li>
                    <label class="label-checkbox item-content">
                      <input v-model="usecamera" type="checkbox" name="bc-checkbox" />
                      <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                      <div class="item-inner">
                        <div class="item-title">Barcode per Kamera</div>
                      </div>
                    </label>
                  </li>

                  <li v-show="hasform" transition="expand">
                    <label class="label-checkbox item-content">
                      <input v-model="showform" type="checkbox" name="bc-checkbox" />
                      <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                      <div class="item-inner">
                        <div class="item-title">Formular anzeigen</div>
                      </div>
                    </label>
                  </li>

                </ul>
              </div>
              <div class="content-block">
                <div class="row">
                  <div class="col-25"></div>
                  <div class="col-50">
                    <input v-show="validquickscan"
                           @click.stop.prevent="scanfoto"
                           type="submit" value="Weiter" class="button button-big button-fill color-green"/>
                  </div>
                  <div class="col-25"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Barcode page -->
          <div class="page cached navbar-fixed" data-page="barcode" >
            <!-- Top Navbar-->
            <div class="navbar">
              <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="back link"> <i class="icon icon-back"></i><span></span></a>
                </div>
                <div class="center">Vorgangsname / Barcode</div>
              </div>
            </div>
            <!-- Scrollable page content-->
            <div class="page-content">
              <div class="list-block">
                <ul>
                  <li>

                    <li v-show="!usecamera" transition="expand">
                        <div class="item-content">
                            <div class="item-media"><i class="icon icon-price-tag"></i></div>
                            <div class="item-inner">
                                <div class="item-input">
                                    <input type="text" v-model="set.code" placeholder="Vorgangsname / Barcode"/>
                                </div>
                            </div>
                        </div>
                    </li>

                    <div v-show="validbarcode" class="item-content">
                      <div class="item-media"><i class="icon icon-info"></i></div>
                      <div class="item-inner">
                        <div class="item-input">
                          <input type="text" v-model="set.name" placeholder="Vorgangsname" readonly />
                        </div>
                      </div>
                    </div>
                  </li>


                <li v-show="!usecamera" transition="expand">
                  <a href="#" class="item-link smart-select" data-back-on-select="true">
                    <select v-model="codeformat">
                      <option value="" ></option>
                      <option v-for="format in codeformats" :value="format">
                        {{ format }}
                      </option>
                    </select>
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-list2"></i></div>
                      <div class="item-inner" style="display:flex;">
                        <!-- Select label -->
                        <div class="item-title">Barcodeformat</div>
                        <!-- Selected value, not required -->
                        <div class="item-after"></div>
                      </div>
                    </div>
                  </a>
                </li>

                  <li>
                    <label class="label-checkbox item-content">
                      <input v-model="usecamera" type="checkbox" name="bc-checkbox" />
                      <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                      <div class="item-inner">
                        <div class="item-title">Barcode per Kamera</div>
                      </div>
                    </label>
                  </li>

                </ul>
              </div>
              <div class="content-block">
                <div class="row">
                  <div class="col-25"></div>
                  <div class="col-50">
                    <input v-show="validbarcode"
                           @click.stop.prevent="scanbarcode"
                           type="submit" value="Weiter" class="button button-big button-fill color-green"/>
                  </div>
                  <div class="col-25"></div>
                </div>
              </div>
            </div>
          </div>

          <!--Login Page -->
          <div data-page="login" class="page cached navbar-fixed">
            <!-- Top Navbar-->
            <div class="navbar">
              <div class="navbar-inner">
                <div class="left">
                    <a href="#" class="back link"> <i class="icon icon-back"></i><span></span></a>
                </div>
                <div class="center">Login</div>
              </div>
            </div>
            <!-- Scrollable page content-->
            <div class="page-content">
              <div class="list-block">
                <ul>
                  <li>
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-form-name"></i></div>
                      <div class="item-inner">
                        <div class="item-title label">Name</div>
                        <div class="item-input">
                          <input type="text" v-model="login.login" placeholder="Loginname"/>
                        </div>
                      </div>
                    </div>
                  </li>
                  <li>
                    <div class="item-content">
                      <div class="item-media"><i class="icon icon-form-password"></i></div>
                      <div class="item-inner">
                        <div class="item-title label">Passwort</div>
                        <div class="item-input">
                          <input type="password" v-model="login.password" placeholder="Passwort"/>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="content-block">
                <div class="row">
                  <div class="col-25"></div>
                  <div class="col-50">
                    <input v-show="validlogin" type="submit" onclick="vm.submitlogin();return false;" value="Anmelden" class="button button-big button-fill color-green"/>
                  </div>
                  <div class="col-25"></div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/framework7.min.js"></script>
    <script type="text/javascript" src="js/lockr.min.js"></script>
    <script type="text/javascript" src="js/lodash.js"></script>
    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/moment.js"></script>
    <script type="text/javascript" src="js/camera.js"></script>
    <script type="text/javascript" src="js/file.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
  </body>
</html>
